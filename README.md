Содрано с https://github.com/danielwertheim/mycouch. Переделано под Core.